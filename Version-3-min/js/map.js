var map;require(["esri/map","esri/dijit/Scalebar","dojo/parser","esri/geometry/webMercatorUtils","esri/dijit/HomeButton","esri/dijit/LocateButton","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/dijit/Search","esri/layers/FeatureLayer","esri/dijit/Popup","esri/dijit/InfoWindowLite","esri/InfoTemplate","esri/dijit/Legend","dojo/_base/array","dojo/dom","dojo/domReady!"],function(l,B,E,H,T,y,p,q,u,P,r,m,v,k,d,b){E.parse();var D=new l("mapDiv",{center:[-101.52419,36.093145],sliderPosition:"top-left",zoom:9,scrollWheelZoom:true});D.setBasemap("topo");var Z=new q("http://server.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer");D.addLayer(Z);Z.hide();var Y=new q("http://services.arcgisonline.com/arcgis/rest/services/Specialty/Soil_Survey_Map/MapServer");D.addLayer(Y);Y.hide();D.on("load",function(){D.on("mouse-move",g);D.on("mouse-drag",g)});function g(aa){var ab=H.webMercatorToGeographic(aa.mapPoint);b.byId("info").innerHTML=ab.y.toFixed(6)+", "+ab.x.toFixed(6)}var a=new B({map:D,scalebarStyle:"line",scalebarUnit:"dual"});var i=new T({map:D},"HomeButton");i.startup();geoLocate=new y({map:D,useTracking:true,scale:10000,},"LocateButton");geoLocate.startup();var W=new u({enableButtonMode:true,enableLabel:false,sources:[],enableInfoWindow:false,zoomScale:10000,map:D},"search");var N=W.get("sources");N.push({featureLayer:new P("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/Wells/MapServer/0"),searchFields:["WellNum"],displayField:"WellNum",exactMatch:false,outFields:["*"],name:"Well Number",placeholder:"MO-0001",maxResults:10,maxSuggestions:10,enableSuggestions:true,minCharacters:0});N.push({featureLayer:new P("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/Sections/MapServer/0"),searchFields:["ADDRESS"],displayField:"ADDRESS",exactMatch:false,name:"Section, Block, & Survey",outFields:["*"],placeholder:"337, 44, H&TC",maxResults:10,maxSuggestions:10,enableSuggestions:true,enableHighlight:false,minCharacters:0});W.set("sources",N);W.startup();var G=D.infoWindow;G.highlight=true;G.titleInBody=false;G.domNode.className+=" Light";var O=new v();O.setTitle("<b>${WellNum}</b>");O.setContent("<b>Type of Well:</b> ${WellType:wellTypeDesc}</br><b>Well Class:</b> ${WellClass:wellClassDesc}</br><b>Max Yield:</b> ${WellMaxYield} gpm</br><b>GPU ID:</b> ${PropId}</br><b>Section, Block & Survey:</b> ${WellSection}, ${WellBlock}, ${WellSurvey}</br><b>Latitude:</b> ${WellLatitude}</br><b>Longitude:</b> ${WellLongitude}<br><b>State Tracking #:</b> ${StTrackingNum}<br><b>Documentation: </b><a target='_blank' href=http://map.northplainsgcd.org/logs/${WellCounty}/${WellNum:urlFunction}.pdf>Click Here</a></br>");var M=new v();M.setTitle("<b>State Well: ${StateWellNumber}</b>");M.setContent("<b>Type of Well:</b> ${PrimaryWaterUse}</br><b>Elevation:</b> ${Elevation} ft.</br><b>Well Depth:</b> ${WellDepth} ft.</br><b>Latitude:</b> ${CoordDDLat}</br><b>Longitude:</b> ${CoordDDLong}</br><b>Database Results: </b><a target='_blank' href=http://www2.twdb.texas.gov/apps/waterdatainteractive//GetReports.aspx?Num=${StateWellNumber}&Type=GWDB>Click Here</a></br><b>Other Documentation: </b><a target='_blank' href=http://www2.twdb.texas.gov/apps/waterdatainteractive//GetScannedImage.aspx?Num=${StateWellNumber}&amp;Cnty=${CountyName}>Click Here</a></br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<img src=images/TWDB.png>");var L=new v();L.setTitle("<b>Monitor Well: ${WellNm}</b>");L.setContent("<b>Name:</b> ${Name}</br><b>Well Depth:</b> ${Depth} feet</br><b>State Well Number:</b> ${StateNo}</br><b>Longitude:</b> ${Longitude}</br><b>Latitude:</b> ${Latitude}</br><b>Section, Block & Survey:</b> ${Sec}, ${Blk}, ${Survey}</br><b>Documentation: </b><a target='_blank' href=http://map.northplainsgcd.org/logs/${Co}/${WellNm:urlFunction}.pdf>Click Here</a></br> </br><div class='btn-group' role='group' aria-label='...'><button type='button' class='btn btn-default' id='thicknessButton' data-toggle='modal' data-target='#thicknessModal' onclick='thicknessChart(${StateNo})'>Saturated Thickness</button><button type='button' class='btn btn-default' id='depthButton' data-toggle='modal' data-target='#depthModal' onclick='depthChart(${StateNo})'>Depth to Water</button></div>");var K=new v();K.setTitle("Annual Monitor Well: ${County_Nam}");K.setContent("<b>Aquifer:</b> ${Aquifer}</br><b>County:</b> ${County}</br><b>State Well Number:</b> ${State_Numb}</br><b>Surface Elevation:</b> ${Surface_El}</br>-----------------------------------------</br>All values represent feet below surface</br><b>1982:</b> ${F1982:winterFunc}</br><b>1983:</b> ${F1983:winterFunc}</br><b>1984:</b> ${F1984:winterFunc}</br><b>1985:</b> ${F1985:winterFunc}</br><b>1986:</b> ${F1986:winterFunc}</br><b>1987:</b> ${F1987:winterFunc}</br><b>1988:</b> ${F1988:winterFunc}</br><b>1989:</b> ${F1989:winterFunc}</br><b>1990:</b> ${F1990:winterFunc}</br><b>1991:</b> ${F1991:winterFunc}</br><b>1992:</b> ${F1992:winterFunc}</br><b>1993:</b> ${F1993:winterFunc}</br><b>1994:</b> ${F1994:winterFunc}</br><b>1995:</b> ${F1995:winterFunc}</br><b>1996:</b> ${F1996:winterFunc}</br><b>1997:</b> ${F1997:winterFunc}</br><b>1998:</b> ${F1998:winterFunc}</br><b>1999:</b> ${F1999:winterFunc}</br><b>2000:</b> ${F2000:winterFunc}</br><b>2001:</b> ${F2001:winterFunc}</br><b>2002:</b> ${F2002:winterFunc}</br><b>2003:</b> ${F2003:winterFunc}</br><b>2004:</b> ${F2004:winterFunc}</br><b>2005:</b> ${F2005:winterFunc}</br><b>2006:</b> ${F2006:winterFunc}</br><b>2007:</b> ${F2007:winterFunc}</br><b>2008:</b> ${F2008:winterFunc}</br><b>2009:</b> ${F2009:winterFunc}</br><b>2010:</b> ${F2010:winterFunc}</br><b>2011:</b> ${F2011:winterFunc}</br><b>2012:</b> ${F2012:winterFunc}</br><b>2013:</b> ${F2013:winterFunc}</br><b>2014:</b> ${F2014:winterFunc}</br><b>2015:</b> ${F2015:winterFunc}</br><b>2016:</b> ${F2016:winterFunc}");var J=new v();J.setTitle("Submitted Well Reports");J.setContent("<b> Type of Well:</b> ${WellType}</br><b>Proposed Use:</b> ${ProposedUse}</br><b>Date of Well Completion:</b> ${DateOfWellCompletion}</br><b>Bore hole Depth:</b> ${BoreholeDepthFt} feet</br><b>County:</b> ${County}</br><b>Documentation: </b><a target='_blank' href=http://www2.twdb.texas.gov/apps/waterdatainteractive//GetReports.aspx?Num=${WellReportTrackingNumber}&Type=SDR-Well>Click Here</a></br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<img src=images/TWDB.png>");var I=new v();I.setTitle("Submitted Plugging Reports");I.setContent("<b> Type of Well:</b> ${WellType}</br><b>Date of Plugging:</b> ${DateOfWellPlugging}</br><b>Bore hole Depth:</b> ${BoreholeDepthFt} feet</br><b>County:</b> ${County}</br><b>Documentation: </b><a target='_blank' href=http://www2.twdb.texas.gov/apps/waterdatainteractive//GetReports.aspx?Num=${PluggingReportTrackingNumber}&Type=SDR-Plug>Click Here</a></br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<img src=images/TWDB.png>");urlFunction=function(ad,ab,ac){var ae=document.createElement("div");ae.innerHTML=ad;var aa=ae.firstChild.textContent;aa=aa.trim();return aa};wellTypeDesc=function(ad,ab,ac){var ae=document.createElement("div");ae.innerHTML=ad;var aa=ae.firstChild.textContent;switch(aa){case"2":return"Domestic";break;case"3":return"Irrigation";break;case"4":return"Municipal";break;case"5":return"Livestock";break;case"6":return"Rig Supply";break;case"7":return"Monitor";break;case"8":return"Industrial";break;case"10":return"Commercial";break;case"12":return"Church/School";break;case"13":return"Public Water Supply";break;case"14":return"Auxillary";break;case"15":return"Heat Exchange";break;case"16":return"Cancel";break;default:return"Unknown: "+ad}};winterFunc=function(ad,ab,ac){var ae=document.createElement("div");ae.innerHTML=ad;var aa=ae.firstChild.textContent;switch(aa){case"0":return"No Measurement";break;case"N A":return"No Measurement";break;case"N M":return"No Measurement";break;default:return ad}};wellClassDesc=function(ad,ab,ac){var ae=document.createElement("div");ae.innerHTML=ad;var aa=ae.firstChild.textContent;switch(aa){case"1":return"S";break;case"2":return"A";break;case"3":return"B";break;case"4":return"C";break;case"5":return"D";break;case"10":return"Non-Exempt";break;case"11":return"Spacing Exempt";break;default:return"Unknown: "+ad}};var X=new P("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/Wells/MapServer/0",{mode:P.MODE_ONDEMAND,infoTemplate:O,outFields:["*"]});var A=new P("http://services.twdb.texas.gov/arcgis/rest/services/Public/TWDB_Groundwater_database/MapServer/0",{mode:P.MODE_ONDEMAND,infoTemplate:M,outFields:["*"],});var w=new P("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/RecorderMap/MapServer/0",{mode:P.MODE_ONDEMAND,infoTemplate:L,outFields:["*"],});var U=new P("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/WinterWater/MapServer/0",{mode:P.MODE_ONDEMAND,infoTemplate:K,outFields:["*"],});var Q=new P("http://services.twdb.texas.gov/arcgis/rest/services/Public/WellReports/MapServer/0",{mode:P.MODE_ONDEMAND,infoTemplate:J,outFields:["*"],});var S=new P("http://services.twdb.texas.gov/arcgis/rest/services/Public/PluggingReports/MapServer/0",{mode:P.MODE_ONDEMAND,infoTemplate:I,outFields:["*"],});D.addLayer(X);D.addLayer(A);D.addLayer(w);D.addLayer(U);D.addLayer(Q);D.addLayer(S);A.hide();X.hide();U.hide();Q.hide();S.hide();var f=new p("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/Outline/MapServer");var F=new p("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/Counties/MapServer");var C=new p("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/Sections/MapServer");var V=new p("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/Wells/MapServer");var x=new p("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/Wells3/MapServer");var n=new p("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/Depth/MapServer");var o=new p("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/Decines/MapServer");var h=new p("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/Thickness/MapServer");var s=new p("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/major/MapServer",{opacity:0.3});var t=new p("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/minor/MapServer",{opacity:0.3});var e=new p("http://services.twdb.texas.gov/arcgis/rest/services/Public/TWDB_Groundwater_database/MapServer");var z=new p("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/RecorderMap/MapServer");var j=new p("http://services.twdb.texas.gov/arcgis/rest/services/Public/WellReports/MapServer");var c=new p("http://services.twdb.texas.gov/arcgis/rest/services/Public/PluggingReports/MapServer");var R=new p("http://map.northplainsgcd.org/npgcdgis/rest/services/IMPMaps/WinterWater/MapServer");D.on("layers-add-result",function(ab){var ac=d.map(ab.layers,function(ae,ad){return{layer:ae.layer,title:ae.layer.name}});if(ac.length>0){var aa=new k({map:D,layerInfos:ac},"legend");aa.startup()}});D.addLayers([s,t,f,F,C,V,x,n,o,h,e,z,j,c,R]);n.hide();o.hide();h.hide();s.hide();t.hide();e.hide();V.hide();x.hide();j.hide();c.hide();R.hide();$(document).ready(function(){$("#depthImg").click(function(){n.show();o.hide();h.hide()})});$(document).ready(function(){$("#declineImg").click(function(){n.hide();o.show();h.hide()})});$(document).ready(function(){$("#thicknessImg").click(function(){n.hide();o.hide();h.show()})});$(document).ready(function(){$("#majorImg").click(function(){s.show();t.hide()})});$(document).ready(function(){$("#minorImg").click(function(){s.hide();t.show()})});$(document).ready(function(){$("#imageryImg").click(function(){$("#imagery-toggle").addClass("active");$("#streets-toggle").removeClass("active");$("#topo-toggle").removeClass("active");$("#usaTopo-toggle").removeClass("active");$("#gray-toggle").removeClass("active");$("#geo-toggle").removeClass("active");$("#soil-toggle").removeClass("active");D.setBasemap("hybrid");Z.hide();Y.hide()})});$(document).ready(function(){$("#streetImg").click(function(){$("#imagery-toggle").removeClass("active");$("#streets-toggle").addClass("active");$("#topo-toggle").removeClass("active");$("#usaTopo-toggle").removeClass("active");$("#gray-toggle").removeClass("active");$("#geo-toggle").removeClass("active");$("#soil-toggle").removeClass("active");D.setBasemap("streets");Z.hide();Y.hide()})});$(document).ready(function(){$("#topoImg").click(function(){$("#imagery-toggle").removeClass("active");$("#streets-toggle").removeClass("active");$("#topo-toggle").addClass("active");$("#usaTopo-toggle").removeClass("active");$("#gray-toggle").removeClass("active");$("#geo-toggle").removeClass("active");$("#soil-toggle").removeClass("active");D.setBasemap("topo");Z.hide();Y.hide()})});$(document).ready(function(){$("#usaTopoImg").click(function(){$("#imagery-toggle").removeClass("active");$("#streets-toggle").removeClass("active");$("#topo-toggle").removeClass("active");$("#usaTopo-toggle").addClass("active");$("#gray-toggle").removeClass("active");$("#geo-toggle").removeClass("active");$("#soil-toggle").removeClass("active");D.setBasemap("topo");Z.show();Y.hide()})});$(document).ready(function(){$("#grayImg").click(function(){$("#imagery-toggle").removeClass("active");$("#streets-toggle").removeClass("active");$("#topo-toggle").removeClass("active");$("#usaTopo-toggle").removeClass("active");$("#gray-toggle").addClass("active");$("#geo-toggle").removeClass("active");$("#soil-toggle").removeClass("active");D.setBasemap("gray");Z.hide();Y.hide()})});$(document).ready(function(){$("#geoImg").click(function(){$("#imagery-toggle").removeClass("active");$("#streets-toggle").removeClass("active");$("#topo-toggle").removeClass("active");$("#usaTopo-toggle").removeClass("active");$("#gray-toggle").removeClass("active");$("#geo-toggle").addClass("active");$("#soil-toggle").removeClass("active");D.setBasemap("national-geographic");Z.hide();Y.hide()})});$(document).ready(function(){$("#soilImg").click(function(){$("#imagery-toggle").removeClass("active");$("#streets-toggle").removeClass("active");$("#topo-toggle").removeClass("active");$("#usaTopo-toggle").removeClass("active");$("#gray-toggle").removeClass("active");$("#geo-toggle").removeClass("active");$("#soil-toggle").addClass("active");D.setBasemap("national-geographic");Z.hide();Y.show()})});$(document).ready(function(){$("#baselayer li").click(function(aa){switch(aa.target.text){case"Imagery":$("#imagery-toggle").addClass("active");$("#streets-toggle").removeClass("active");$("#topo-toggle").removeClass("active");$("#usaTopo-toggle").removeClass("active");$("#gray-toggle").removeClass("active");$("#geo-toggle").removeClass("active");$("#soil-toggle").removeClass("active");D.setBasemap("hybrid");Z.hide();Y.hide();break;case"Streets":$("#imagery-toggle").removeClass("active");$("#streets-toggle").addClass("active");$("#topo-toggle").removeClass("active");$("#usaTopo-toggle").removeClass("active");$("#gray-toggle").removeClass("active");$("#geo-toggle").removeClass("active");$("#soil-toggle").removeClass("active");D.setBasemap("streets");Z.hide();Y.hide();break;case"Topographic":$("#imagery-toggle").removeClass("active");$("#streets-toggle").removeClass("active");$("#topo-toggle").addClass("active");$("#usaTopo-toggle").removeClass("active");$("#gray-toggle").removeClass("active");$("#geo-toggle").removeClass("active");$("#soil-toggle").removeClass("active");D.setBasemap("topo");Z.hide();Y.hide();break;case"USA Topographic":$("#imagery-toggle").removeClass("active");$("#streets-toggle").removeClass("active");$("#topo-toggle").removeClass("active");$("#usaTopo-toggle").addClass("active");$("#gray-toggle").removeClass("active");$("#geo-toggle").removeClass("active");$("#soil-toggle").removeClass("active");D.setBasemap("topo");Z.show();Y.hide();break;case"Light Gray":$("#imagery-toggle").removeClass("active");$("#streets-toggle").removeClass("active");$("#topo-toggle").removeClass("active");$("#usaTopo-toggle").removeClass("active");$("#gray-toggle").addClass("active");$("#geo-toggle").removeClass("active");$("#soil-toggle").removeClass("active");D.setBasemap("gray");Z.hide();Y.hide();break;case"National Geographic":$("#imagery-toggle").removeClass("active");$("#streets-toggle").removeClass("active");$("#topo-toggle").removeClass("active");$("#usaTopo-toggle").removeClass("active");$("#gray-toggle").removeClass("active");$("#geo-toggle").addClass("active");$("#soil-toggle").removeClass("active");D.setBasemap("national-geographic");Z.hide();Y.hide();break;case"USDA-NRCS Soil Survey":$("#imagery-toggle").removeClass("active");$("#streets-toggle").removeClass("active");$("#topo-toggle").removeClass("active");$("#usaTopo-toggle").removeClass("active");$("#gray-toggle").removeClass("active");$("#geo-toggle").removeClass("active");$("#soil-toggle").addClass("active");D.setBasemap("national-geographic");Z.hide();Y.show();break}})});$(document).ready(function(){$("#hydro li").click(function(aa){switch(aa.target.text){case"Depth to Water":n.show();o.hide();h.hide();break;case"Average Decline":n.hide();o.show();h.hide();break;case"Saturated Thickness":n.hide();o.hide();h.show();break;case"None":n.hide();o.hide();h.hide();break}})});$(document).ready(function(){$("#wells li").click(function(aa){switch(aa.target.text){case"District's Well Database":V.show();x.show();X.show();A.hide();e.hide();z.hide();w.hide();U.hide();R.hide();Q.hide();j.hide();S.hide();c.hide();break;case"Continuous Well Monitoring Network":V.hide();x.hide();X.hide();A.hide();e.hide();z.show();w.show();U.hide();R.hide();Q.hide();j.hide();S.hide();c.hide();break;case"Annual Well Monitoring Network":V.hide();x.hide();X.hide();A.hide();e.hide();z.hide();w.hide();U.show();R.show();Q.hide();j.hide();S.hide();c.hide();break;case"TWDB's Well Database":V.hide();x.hide();X.hide();A.hide();e.hide();z.hide();w.hide();U.hide();R.hide();Q.show();j.show();S.hide();c.hide();break;case"TWDB's Plugging Reports":V.hide();x.hide();X.hide();A.hide();e.hide();z.hide();w.hide();U.hide();R.hide();Q.hide();j.hide();S.show();c.show();break;case"TWDB's Database":V.hide();x.hide();X.hide();A.show();e.show();z.hide();w.hide();U.hide();R.hide();Q.hide();j.hide();S.hide();c.hide();break}})});$(document).ready(function(){$("#Aquifers li").click(function(aa){switch(aa.target.text){case"Major Aquifers":s.show();t.hide();break;case"Minor Aquifers":s.hide();t.show();break;case"None":s.hide();t.hide();break}})})});